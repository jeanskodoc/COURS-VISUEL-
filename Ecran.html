<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>APC Sciences ¬∑ Togo | Acc√®s 7j avec compte √† rebours</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --vert:#006b3f;
            --jaune:#ffde00;
            --rouge:#d21034;
            --bg:#f4f9f5;
            --text:#1a3324;
            --white:#fff;
            --shadow:0 8px 20px rgba(0,70,30,0.08);
            --radius:24px;
        }
        body{
            font-family:'Inter',sans-serif;
            background:var(--bg);
            color:var(--text);
            padding:8px 0;
            overflow-x:hidden;
        }
        /* drapeau fixe r√©duit */
        .flag-togo{
            position:fixed;
            top:0;left:0;width:100%;height:6px;
            display:flex;z-index:10000;
        }
        .flag-togo .v{width:33.33%;background:#006b3f}
        .flag-togo .j{width:33.33%;background:#ffde00}
        .flag-togo .r{width:33.33%;background:#d21034}
        .flag-bottom{
            position:fixed;bottom:0;left:0;width:100%;height:6px;
            display:flex;z-index:10000;
        }
        .btn-retour{
            position:sticky;top:10px;left:10px;z-index:9000;
            background:rgba(255,255,255,0.95);backdrop-filter:blur(4px);
            border:1px solid rgba(0,107,63,0.2);border-radius:40px;
            padding:6px 18px;font-size:0.9rem;font-weight:600;
            color:var(--vert);display:inline-flex;align-items:center;
            gap:8px;margin:6px 12px;width:fit-content;cursor:pointer;
        }
        .container{max-width:1200px;margin:0 auto;padding:0 16px;}

        /* header compact */
        .header{
            background:var(--white);border-radius:40px;margin:6px 8px 12px;
            padding:12px 18px;box-shadow:var(--shadow);
            display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:12px;
        }
        .logo{
            display:flex;align-items:center;gap:12px;
        }
        .logo-icon{
            background:var(--vert);width:42px;height:42px;border-radius:16px;
            display:flex;align-items:center;justify-content:center;
            color:white;font-size:1.6rem;
        }
        .titre h2{font-size:1.4rem;font-weight:800;}
        .titre span{font-size:0.8rem;background:#e2f0e6;padding:2px 12px;border-radius:30px;}
        .mini-flag{
            display:flex;height:28px;width:54px;border-radius:30px;overflow:hidden;
            border:1px solid white;
        }
        .mini-flag .v{background:#006b3f;width:33.33%}
        .mini-flag .j{background:#ffde00;width:33.33%}
        .mini-flag .r{background:#d21034;width:33.33%}

        /* hero compact */
        .hero-grid{
            display:flex;flex-wrap:wrap;align-items:center;gap:24px;margin:20px 0 30px;
        }
        .hero-left{flex:1 1 300px;}
        .hero-left h1{font-size:clamp(1.8rem,5vw,2.8rem);font-weight:800;line-height:1.2;}
        .highlight{
            background:var(--jaune);display:inline-block;padding:5px 22px;border-radius:40px;
            font-weight:700;font-size:1.1rem;margin:15px 0;border:1px solid #ccb000;
        }

        /* boutons compacts */
        .btn{
            background:#006b3f;border:none;color:white;font-weight:600;
            padding:10px 20px;border-radius:40px;font-size:0.95rem;
            display:inline-flex;align-items:center;justify-content:center;
            gap:8px;box-shadow:0 4px 10px rgba(0,107,63,0.3);text-decoration:none;
            cursor:pointer;border:2px solid transparent;
        }
        .btn-jaune{background:#ffde00;color:#1e3a1e;}
        .btn-rouge{background:#d21034;}
        .btn-vert{background:var(--vert);}

        /* section projection compacte */
        .proj-card{
            background:linear-gradient(145deg,#fff,#f0faf3);border-radius:50px;
            padding:30px 25px;margin:40px 0;border:3px solid;border-image:linear-gradient(90deg,#006b3f 33%,#ffde00 33%,#ffde00 66%,#d21034 66%)1;
        }
        .device-icons{
            display:flex;flex-wrap:wrap;gap:15px;margin:15px 0;
        }
        .device{
            background:white;border-radius:30px;padding:8px 18px;display:flex;
            align-items:center;gap:10px;font-weight:600;border:1px solid #006b3f;
        }

        /* grille mati√®res */
        .grid{
            display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:16px;margin:30px 0;
        }
        .card{
            background:white;border-radius:28px;padding:22px 10px;text-align:center;box-shadow:var(--shadow);
        }
        .card i{font-size:2.5rem;}

        /* FORMULAIRE DE COMMANDE */
        .form-commande{
            background:white;border-radius:50px;padding:30px 25px;margin:40px 0;
            border:4px solid var(--jaune);box-shadow:var(--shadow);
        }
        .form-title{
            font-size:1.8rem;font-weight:800;color:var(--vert);margin-bottom:20px;
            display:flex;align-items:center;gap:10px;
        }
        .form-group{
            margin-bottom:18px;
        }
        .form-group label{
            font-weight:600;display:block;margin-bottom:5px;color:var(--text);
        }
        .form-control{
            width:100%;padding:12px 18px;border-radius:60px;border:2px solid #ccc;
            font-family:'Inter',sans-serif;font-size:1rem;
        }
        .form-control:focus{
            outline:none;border-color:var(--vert);
        }
        .form-row{
            display:flex;flex-wrap:wrap;gap:18px;margin-bottom:18px;
        }
        .form-row .form-group{
            flex:1 1 200px;
        }
        .payment-info{
            background:#eaf3ee;border-radius:40px;padding:18px;margin:20px 0;
            border-left:8px solid var(--jaune);
        }
        .code-genere{
            background:#f0f0f0;border-radius:40px;padding:15px;text-align:center;
            font-family:monospace;font-size:1.4rem;font-weight:700;letter-spacing:2px;
            border:2px dashed var(--vert);margin:20px 0;
        }
        .btn-submit{
            background:var(--vert);color:white;border:none;padding:15px 30px;
            border-radius:60px;font-size:1.2rem;font-weight:700;width:100%;
            cursor:pointer;transition:0.2s;border:2px solid var(--jaune);
            margin-bottom:15px;
        }
        .btn-submit:hover{
            background:var(--rouge);
        }

        /* SECTION CONTENU PROT√âG√â (visible seulement si actif) */
        .protected-content{
            background:white;border-radius:50px;padding:30px;margin:40px 0;
            border:4px solid var(--vert);display:none;
        }

        /* footer dev compact */
        .footer{
            background:#0b2b1b;border-radius:50px 50px 0 0;padding:35px 20px 20px;margin-top:50px;
        }
        .dev-card{
            background:#1f4a33;border-radius:60px;padding:20px 25px;
            display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:20px;
            border:3px solid #ffde00;margin-bottom:30px;
        }
        .dev-infos{display:flex;align-items:center;gap:15px;}
        .dev-icon{
            background:#ffde00;width:60px;height:60px;border-radius:50%;
            display:flex;align-items:center;justify-content:center;font-size:2rem;
        }
        .whatsapp{
            background:#25D366;padding:10px 25px;border-radius:50px;color:white;
            font-weight:600;text-decoration:none;display:inline-flex;align-items:center;gap:8px;
        }
        .hashtags{
            display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin:30px 0;
        }
        .hashtags span{
            background:rgba(255,255,255,0.08);padding:5px 18px;border-radius:40px;color:#ffde00;font-size:0.9rem;
        }

        #btnToTop{
            position:fixed;bottom:20px;right:20px;width:48px;height:48px;border-radius:50%;
            background:#d21034;color:white;border:3px solid #ffde00;font-size:1.5rem;
            cursor:pointer;display:none;align-items:center;justify-content:center;z-index:9999;
        }

        /* message de confirmation */
        .alert{
            background:#006b3f;color:white;padding:15px;border-radius:40px;margin:20px 0;
            display:none;text-align:center;font-weight:600;
        }

        /* compte √† rebours am√©lior√© */
        .expiration-info{
            background:linear-gradient(135deg, var(--rouge), #b00e2c);
            color:white;
            padding:20px;
            border-radius:50px;
            text-align:center;
            font-weight:700;
            margin-bottom:25px;
            border:3px solid var(--jaune);
            box-shadow:0 8px 0 #7a0a1e;
            font-size:1.3rem;
        }
        .countdown-big{
            font-size:2.2rem;
            background:white;
            color:var(--rouge);
            padding:10px 20px;
            border-radius:60px;
            display:inline-block;
            margin-top:10px;
            border:3px solid var(--jaune);
            font-family:monospace;
        }

        /* bouton d'acc√®s au CV */
        .btn-cv-container{
            margin-top:25px;
            text-align:center;
        }
        .btn-cv{
            background:var(--vert);
            color:white;
            font-size:1.3rem;
            padding:15px 40px;
            border-radius:60px;
            border:3px solid var(--jaune);
            font-weight:700;
            display:inline-flex;
            align-items:center;
            gap:15px;
            cursor:pointer;
            transition:0.2s;
            text-decoration:none;
        }
        .btn-cv:hover{
            background:var(--rouge);
            transform:scale(1.05);
        }
        @media (max-width:480px){
            .btn{padding:8px 16px;font-size:0.9rem;}
            .device{padding:6px 12px;}
            .form-commande{padding:20px 15px;}
            .countdown-big{font-size:1.5rem;}
        }
    </style>
</head>
<body>
    <!-- drapeau mini -->
    <div class="flag-togo"><div class="v"></div><div class="j"></div><div class="r"></div></div>
    <div class="flag-bottom"><div class="v"></div><div class="j"></div><div class="r"></div></div>

    <button class="btn-retour" onclick="history.back()"><i class="fas fa-arrow-left"></i> Retour</button>

    <header class="header">
        <div class="logo">
            <div class="logo-icon"><i class="fas fa-flask"></i></div>
            <div class="titre">
                <h2>APC Sciences</h2>
                <span>üìò Coll√®ge Togo</span>
            </div>
        </div>
        <div class="mini-flag"><div class="v"></div><div class="j"></div><div class="r"></div></div>
    </header>

    <main class="container">
        <!-- hero compact -->
        <div class="hero-grid">
            <div class="hero-left">
                <h1>Diffusez vos cours APC <span style="color:var(--vert);">sciences</span></h1>
                <div class="highlight"><i class="fas fa-bolt"></i> interactif ¬∑ coll√®ge</div>
                <p style="font-size:1rem;">Situations complexes, laboratoire virtuel, suivi par comp√©tence.</p>
                <div style="display:flex; gap:10px; margin:15px 0; flex-wrap:wrap;">
                    <a href="#commande" class="btn"><i class="fas fa-shopping-cart"></i> Commander 7j</a>
                </div>
            </div>
        </div>

        <!-- projection courte -->
        <div class="proj-card">
            <div style="display:flex; flex-wrap:wrap; align-items:center; gap:20px;">
                <div style="font-size:3rem; background:var(--jaune); padding:15px; border-radius:60px;"><i class="fas fa-video"></i></div>
                <div>
                    <h3 style="font-size:1.5rem;">üìΩÔ∏è Connectez un micro-projecteur</h3>
                    <div class="device-icons">
                        <span class="device"><i class="fas fa-mobile-alt"></i> Android</span>
                        <span class="device"><i class="fas fa-tablet-alt"></i> Tablette</span>
                        <span class="device"><i class="fas fa-laptop"></i> PC</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- FORMULAIRE DE COMMANDE DE COMPTE 7 JOURS -->
        <div id="commande" class="form-commande">
            <div class="form-title">
                <i class="fas fa-key" style="color:var(--jaune);"></i> 
                <span>Commander votre acc√®s 7 jours ¬∑ 500 FCFA</span>
            </div>
            <p style="margin-bottom:20px;">Remplissez ce formulaire. Un code d'acc√®s personnel sera g√©n√©r√© automatiquement. Effectuez le paiement par Mobile Money (Mixx) au <strong>+228 92 87 16 05</strong>.</p>

            <form id="orderForm">
                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-user"></i> Nom & Pr√©nom</label>
                        <input type="text" class="form-control" id="nom" placeholder="KOLA Essouhona" required>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-phone"></i> T√©l√©phone</label>
                        <input type="tel" class="form-control" id="tel" placeholder="90 00 00 00" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-school"></i> Inspection</label>
                        <select class="form-control" id="inspection" required>
                            <option value="">Choisir l'inspection</option>
                            <option value="Lom√©-Commune">Lom√©-Commune</option>
                            <option value="Lom√©-Golfe">Lom√©-Golfe</option>
                            <option value="Maritime">Maritime</option>
                            <option value="Plateaux">Plateaux</option>
                            <option value="Centrale">Centrale</option>
                            <option value="Kara">Kara</option>
                            <option value="Savanes">Savanes</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-map"></i> R√©gion</label>
                        <select class="form-control" id="region" required>
                            <option value="">Choisir la r√©gion</option>
                            <option value="Maritime">Maritime</option>
                            <option value="Plateaux">Plateaux</option>
                            <option value="Centrale">Centrale</option>
                            <option value="Kara">Kara</option>
                            <option value="Savanes">Savanes</option>
                        </select>
                    </div>
                </div>

                <div class="payment-info">
                    <p><strong>üí∞ Paiement :</strong> 500 FCFA par Mobile Money (Mixx) au <strong>+228 92 87 16 05</strong></p>
                    <p><strong>ü§ñ Le code sera automatiquement envoy√© par WhatsApp apr√®s g√©n√©ration.</strong></p>
                </div>

                <!-- Zone d'affichage du code g√©n√©r√© automatiquement -->
                <div class="code-genere" id="codeGenere">
                    ‚ö° Votre code appara√Ætra ici apr√®s g√©n√©ration
                </div>

                <!-- Identifiant associ√© -->
                <div class="code-genere" id="identifiantGenere" style="background:#f9f0e0;">
                    üÜî Identifiant : enseignant_...
                </div>

                <button type="button" class="btn-submit" id="btnGenerer"><i class="fas fa-magic"></i> G√©n√©rer et envoyer par WhatsApp</button>
                
                <!-- Bouton pour acc√©der √† CV.html (visible apr√®s g√©n√©ration) -->
                <div id="cvAccessContainer" style="display:none; margin-top:20px;">
                    <div class="btn-cv-container">
                        <button class="btn-cv" id="btnAccesCV">
                            <i class="fas fa-file-pdf"></i> Acc√©der √† mon CV
                            <i class="fas fa-arrow-right"></i>
                        </button>
                        <p style="margin-top:10px; color:var(--vert); font-size:0.9rem;">
                            <i class="fas fa-info-circle"></i> Cliquez pour acc√©der au fichier CV.html
                        </p>
                    </div>
                </div>
            </form>

            <div class="alert" id="alertMessage"></div>
        </div>

        <!-- SECTION CONTENU PROT√âG√â (visible uniquement si compte actif) -->
        <div id="protectedSection" class="protected-content">
            <div class="expiration-info" id="expirationMessage">
                <span style="font-size:1.1rem; display:block; margin-bottom:5px;">‚è≥ Temps restant avant expiration</span>
                <div class="countdown-big" id="countdown">7j 0h 0min</div>
                <div style="margin-top:8px; font-size:0.9rem;">Acc√®s expirera le <span id="expirationDate"></span></div>
            </div>
            <h2 style="color:var(--vert); margin-bottom:20px;">üìö Vos cours et simulations</h2>
            <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px;">
                <div style="background:#f0f0f0; border-radius:30px; padding:20px; text-align:center;">
                    <i class="fas fa-dna" style="font-size:3rem; color:var(--vert);"></i>
                    <h3>SVT - Digestion</h3>
                    <p>Simulation interactive</p>
                </div>
                <div style="background:#f0f0f0; border-radius:30px; padding:20px; text-align:center;">
                    <i class="fas fa-atom" style="font-size:3rem; color:var(--rouge);"></i>
                    <h3>PC - Combustion</h3>
                    <p>Laboratoire virtuel</p>
                </div>
                <div style="background:#f0f0f0; border-radius:30px; padding:20px; text-align:center;">
                    <i class="fas fa-calculator" style="font-size:3rem; color:var(--jaune);"></i>
                    <h3>Maths - G√©om√©trie</h3>
                    <p>Exercices dynamiques</p>
                </div>
            </div>
            <div style="margin-top:30px; text-align:center;">
                <button class="btn btn-rouge" id="btnAccederCV2" style="font-size:1.2rem;">üìÑ Acc√©der √† CV.html</button>
                <button class="btn btn-jaune" id="btnNouveauCompte" style="font-size:1.2rem; margin-left:10px;">üîÑ Nouveau compte</button>
            </div>
        </div>

        <!-- grille mati√®res (visible par d√©faut) -->
        <div class="grid" id="matieresGrid">
            <div class="card"><i class="fas fa-leaf" style="color:var(--vert);"></i><h4>SVT</h4></div>
            <div class="card"><i class="fas fa-atom" style="color:var(--rouge);"></i><h4>PC</h4></div>
            <div class="card"><i class="fas fa-calculator"></i><h4>Maths</h4></div>
            <div class="card"><i class="fas fa-microchip"></i><h4>Techno</h4></div>
        </div>

    </main>

    <!-- footer d√©veloppeur compact -->
    <footer class="footer">
        <div class="container">
            <div class="dev-card">
                <div class="dev-infos">
                    <div class="dev-icon"><i class="fas fa-code"></i></div>
                    <div>
                        <h3 style="color:white; font-size:1.3rem;">KOLA M. Essohouna</h3>
                        <p style="color:#ffde00;"><i class="fas fa-phone-alt"></i> +228 92 87 16 05</p>
                    </div>
                </div>
                <a href="https://wa.me/22892871605" class="whatsapp" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp</a>
            </div>
            <div class="hashtags">
                <span>#APCTogo</span><span>#KOLA_M_E</span><span>#Projection</span><span>#500FCFA</span>
            </div>
            <p style="text-align:center; color:#aaa; font-size:0.85rem;">¬© 2025 APC Sciences ¬∑ Made in Togo</p>
        </div>
    </footer>

    <button id="btnToTop"><i class="fas fa-chevron-up"></i></button>

    <script>
        // Gestion de l'expiration apr√®s 7 jours (stockage local)
        const STORAGE_KEY = 'apc_compte_actif';
        const EXPIRATION_KEY = 'apc_expiration';
        const PROTECTED_SECTION = document.getElementById('protectedSection');
        const COMMANDE_SECTION = document.getElementById('commande');
        const MATIERES_GRID = document.getElementById('matieresGrid');
        const COUNTDOWN_SPAN = document.getElementById('countdown');
        const EXPIRATION_DATE_SPAN = document.getElementById('expirationDate');
        const CV_ACCESS_CONTAINER = document.getElementById('cvAccessContainer');

        // V√©rifier si un compte est actif et non expir√©
        function checkAccountStatus() {
            const actif = localStorage.getItem(STORAGE_KEY) === 'true';
            const expiration = localStorage.getItem(EXPIRATION_KEY);
            
            if (actif && expiration) {
                const now = new Date().getTime();
                const expTime = parseInt(expiration);
                
                if (now < expTime) {
                    // Compte actif et non expir√©
                    showProtectedContent(expTime);
                    return true;
                } else {
                    // Compte expir√©
                    localStorage.removeItem(STORAGE_KEY);
                    localStorage.removeItem(EXPIRATION_KEY);
                    showExpiredMessage();
                }
            }
            // Pas de compte actif
            showOrderForm();
            return false;
        }

        function showProtectedContent(expTime) {
            PROTECTED_SECTION.style.display = 'block';
            COMMANDE_SECTION.style.display = 'none';
            MATIERES_GRID.style.display = 'none';
            
            // Afficher la date d'expiration format√©e
            const dateExpiration = new Date(expTime);
            EXPIRATION_DATE_SPAN.textContent = dateExpiration.toLocaleDateString('fr-FR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            // Mettre √† jour le compte √† rebours
            updateCountdown(expTime);
            
            // Mettre √† jour toutes les secondes
            setInterval(() => updateCountdown(expTime), 1000);
        }

        function updateCountdown(expTime) {
            const now = new Date().getTime();
            const diff = expTime - now;
            
            if (diff <= 0) {
                // Expir√©
                localStorage.removeItem(STORAGE_KEY);
                localStorage.removeItem(EXPIRATION_KEY);
                showOrderForm();
                window.location.reload(); // Recharger pour afficher le formulaire
                return;
            }
            
            const jours = Math.floor(diff / (1000 * 60 * 60 * 24));
            const heures = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const secondes = Math.floor((diff % (1000 * 60)) / 1000);
            
            COUNTDOWN_SPAN.textContent = `${jours}j ${heures}h ${minutes}min ${secondes}s`;
        }

        function showOrderForm() {
            PROTECTED_SECTION.style.display = 'none';
            COMMANDE_SECTION.style.display = 'block';
            MATIERES_GRID.style.display = 'grid';
        }

        function showExpiredMessage() {
            showOrderForm();
            const alertDiv = document.getElementById('alertMessage');
            alertDiv.style.display = 'block';
            alertDiv.style.background = 'var(--rouge)';
            alertDiv.innerHTML = '‚è∞ Votre acc√®s de 7 jours a expir√©. Veuillez commander un nouveau compte.';
        }

        // G√©n√©ration al√©atoire d'un code √† 8 caract√®res
        function genererCode() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let code = '';
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        // G√©n√©rer identifiant unique
        function genererIdentifiant(nom, tel) {
            const base = nom.replace(/\s+/g, '').toLowerCase().slice(0, 8);
            const chiffres = tel.replace(/\D/g, '').slice(-4);
            return `tg_${base}_${chiffres}`;
        }

        // Fonction d'envoi WhatsApp
        function envoyerWhatsApp(code, identifiant, nom, tel, inspection, region) {
            // Num√©ro du d√©veloppeur
            const numero = '22892871605';
            
            // Construction du message
            const message = `üîê *NOUVEAU COMPTE G√âN√âR√â* üîê%0A%0A` +
                           `üë§ *Nom :* ${nom}%0A` +
                           `üìû *T√©l√©phone :* ${tel}%0A` +
                           `üè´ *Inspection :* ${inspection}%0A` +
                           `üåç *R√©gion :* ${region}%0A%0A` +
                           `üÜî *Identifiant :* ${identifiant}%0A` +
                           `üîë *Code d'acc√®s :* ${code}%0A%0A` +
                           `üí∞ *Montant :* 500 FCFA (Mobile Money Mixx)%0A%0A` +
                           `‚úÖ Envoy√© automatiquement depuis l'application APC Sciences Togo.`;
            
            // Cr√©er l'URL WhatsApp
            const url = `https://wa.me/${numero}?text=${message}`;
            
            // Ouvrir dans un nouvel onglet
            window.open(url, '_blank');
        }

        // Bouton g√©n√©rer et envoyer
        document.getElementById('btnGenerer').addEventListener('click', function() {
            const nom = document.getElementById('nom').value.trim();
            const tel = document.getElementById('tel').value.trim();
            const inspection = document.getElementById('inspection').value;
            const region = document.getElementById('region').value;

            if (!nom || !tel || !inspection || !region) {
                alert('Veuillez remplir tous les champs du formulaire.');
                return;
            }

            // G√©n√©ration du code et identifiant
            const code = genererCode();
            const identifiant = genererIdentifiant(nom, tel);

            // Affichage
            document.getElementById('codeGenere').innerHTML = `üîê <strong>${code}</strong>`;
            document.getElementById('identifiantGenere').innerHTML = `üÜî Identifiant : <strong>${identifiant}</strong>`;

            // Envoi par WhatsApp
            envoyerWhatsApp(code, identifiant, nom, tel, inspection, region);

            // Afficher le bouton d'acc√®s √† CV.html
            CV_ACCESS_CONTAINER.style.display = 'block';

            // Message de confirmation
            const alertDiv = document.getElementById('alertMessage');
            alertDiv.style.display = 'block';
            alertDiv.style.background = '#006b3f';
            alertDiv.innerHTML = `‚úÖ Code g√©n√©r√© et envoy√© par WhatsApp !<br>Code : ${code}<br>Identifiant : ${identifiant}<br><br>‚è≥ Cliquez sur le bouton ci-dessous pour acc√©der √† votre CV.`;

            // Stocker temporairement les informations pour l'activation
            sessionStorage.setItem('temp_code', code);
            sessionStorage.setItem('temp_identifiant', identifiant);
            sessionStorage.setItem('temp_nom', nom);
        });

        // Bouton pour acc√©der √† CV.html (depuis le formulaire)
        document.getElementById('btnAccesCV').addEventListener('click', function() {
            window.location.href = 'CV.html';
        });

        // Bouton pour acc√©der √† CV.html (depuis la section prot√©g√©e)
        document.getElementById('btnAccederCV2').addEventListener('click', function() {
            window.location.href = 'CV.html';
        });

        // Bouton pour demander un nouveau compte (depuis la section prot√©g√©e)
        document.getElementById('btnNouveauCompte').addEventListener('click', function() {
            // D√©sactiver le compte actuel
            localStorage.removeItem(STORAGE_KEY);
            localStorage.removeItem(EXPIRATION_KEY);
            window.location.reload(); // Recharger pour afficher le formulaire
        });

        // Simulation d'activation (dans un cas r√©el, ce serait fait par le d√©veloppeur apr√®s r√©ception du paiement)
        // Pour la d√©mo, on ajoute une fonction accessible via console
        window.activerCompte = function() {
            const maintenant = new Date().getTime();
            const expiration = maintenant + (7 * 24 * 60 * 60 * 1000); // +7 jours
            
            localStorage.setItem(STORAGE_KEY, 'true');
            localStorage.setItem(EXPIRATION_KEY, expiration.toString());
            
            alert('‚úÖ Compte activ√© avec succ√®s pour 7 jours !');
            window.location.reload();
        };

        // V√©rifier le statut au chargement
        document.addEventListener('DOMContentLoaded', function() {
            checkAccountStatus();
        });

        // Bouton retour en haut
        const topBtn = document.getElementById('btnToTop');
        window.addEventListener('scroll', () => {
            topBtn.style.display = window.scrollY > 400 ? 'flex' : 'none';
        });
        topBtn.addEventListener('click', () => window.scrollTo({top:0, behavior:'smooth'}));

        // Ancres douces
        document.querySelectorAll('a[href^="#"]').forEach(a => {
            a.addEventListener('click', (e) => {
                const target = document.querySelector(a.getAttribute('href'));
                if (target) {
                    e.preventDefault();
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    </script>
</body>
</html>
